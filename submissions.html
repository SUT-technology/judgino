<!DOCTYPE html>
<html lang="en">

<head>
    <!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه اصلی</title>
    <link rel="stylesheet" href="/assets/css/lib/daisyui.min.css">
    <script src="/assets/js/lib/tailwind.min.js"></script>
    <script src="/assets/js/config.js"></script>
    <link rel='stylesheet' href='/assets/css/lib/uicons-regular-rounded.css'>
    <link rel='stylesheet' href='/assets/css/lib/uicons-solid-rounded.css'>
    <link rel="stylesheet" href="/assets/css/style.css">
</head>

<body>

    <div class="bg-gray-20 bg-opacity-45 backdrop-blur-2xl p-3 mx-auto w-4/5 mt-10 h-[90vh] rounded-3xl shadow-lg">
        <h1 class="text-4xl text-center font-fedra mb-5">لیست ارسال‌ها</h1>


        <div class="mb-4">
            <input type="text" id="filterInput" placeholder="جستجوی ارسال‌ها..." class="p-2 w-full rounded-md border mb-4">
            <select id="questionFilter" class="p-2 w-1/4 rounded-md border">
                <option value="all">تمام ارسال‌ها</option>
                <option value="mine">ارسال‌های من</option>
            </select>
            <select id="questionFilter" class="p-2 w-1/4 rounded-md border">
                <option value="all">تمام ارسال‌ها</option>
                <option value="mine">ارسال‌های نهایی</option>
            </select>
            <select id="questionFilter" class="p-2 w-1/4 rounded-md border">
                <option value="all">تمام سوالات</option>
                <!-- questions to be add -->
            </select>
        </div>


        <div class="overflow-x-auto w-3/4 mx-auto bg-base--gray rounded-xl table-con bg-opacity-75">
            <table class="table-auto w-full text-center border-collapse">
                <thead>
                    <tr>
                        <th class="2">نام سوال</th>
                        <th class="2">پاسخ‌دهنده</th>
                        <th class="2">وضعیت</th>
                        <th class="2">زمان ارسال</th>
                        <th class="2">نوع ارسال</th>
                    </tr>
                </thead>
                <tbody id="questions-list">
                    <tr>
                        <th class="2">سو</th>
                        <th class="2">ممد</th>
                        <th class="2">پذیرفته‌شده</th>
                        <th class="2">امروز</th>
                        <th class="2">نهایی</th>
                    </tr>
                    <tr>
                        <th class="2">سو</th>
                        <th class="2">ممد</th>
                        <th class="2">پذیرفته‌شده</th>
                        <th class="2">امروز</th>
                        <th class="2">نهایی</th>
                    </tr>
                    <tr>
                        <th class="2">سو</th>
                        <th class="2">ممد</th>
                        <th class="2">پذیرفته‌شده</th>
                        <th class="2">امروز</th>
                        <th class="2">نهایی</th>
                    </tr>
                    <tr>
                        <th class="2">سو</th>
                        <th class="2">ممد</th>
                        <th class="2">پذیرفته‌شده</th>
                        <th class="2">امروز</th>
                        <th class="2">نهایی</th>
                    </tr>
                    <tr>
                        <th class="2">سو</th>
                        <th class="2">ممد</th>
                        <th class="2">پذیرفته‌شده</th>
                        <th class="2">امروز</th>
                        <th class="2">نهایی</th>
                    </tr>
                    <tr>
                        <th class="2">سو</th>
                        <th class="2">ممد</th>
                        <th class="2">پذیرفته‌شده</th>
                        <th class="2">امروز</th>
                        <th class="2">نهایی</th>
                    </tr>
                    <tr>
                        <th class="2">سو</th>
                        <th class="2">ممد</th>
                        <th class="2">پذیرفته‌شده</th>
                        <th class="2">امروز</th>
                        <th class="2">نهایی</th>
                    </tr>
                </tbody>
        
            </table>
        </div>

        <div class="flex justify-center items-center mt-4">
            <button id="prevPage" class="p-2 bg-gray-500 text-white rounded-md" disabled>قبلی</button>
            <span id="pageInfo" class="mx-6">صفحه 1 از 1</span>
            <button id="nextPage" class="p-2 bg-gray-500 text-white rounded-md">بعدی</button>
        </div>

    </div>


    <script>
        // Number of questions per page
        const questionsPerPage = 5;
        let currentPage = 1;
        let questionsData = [];

        // Fetch questions from the backend API
        fetch('YOUR_BACKEND_API_URL/questions')
            .then(response => response.json())
            .then(data => {
                questionsData = data;
                renderQuestions();

                // Filter functionality
                const filterInput = document.getElementById('filterInput');
                filterInput.addEventListener('input', () => {
                    renderQuestions();
                });

                // Sort functionality
                const questionSort = document.getElementById('questionSort');
                questionSort.addEventListener('change', () => {
                    renderQuestions();
                });

                // Pagination buttons
                const prevPageBtn = document.getElementById('prevPage');
                const nextPageBtn = document.getElementById('nextPage');
                const pageInfo = document.getElementById('pageInfo');

                prevPageBtn.addEventListener('click', () => {
                    if (currentPage > 1) {
                        currentPage--;
                        renderQuestions();
                    }
                });

                nextPageBtn.addEventListener('click', () => {
                    if (currentPage < Math.ceil(questionsData.length / questionsPerPage)) {
                        currentPage++;
                        renderQuestions();
                    }
                });

                function renderQuestions() {
                    const filterText = filterInput.value.toLowerCase();
                    const sortValue = questionSort.value;

                    // Filter and sort questions
                    let filteredQuestions = questionsData.filter(question =>
                        question.title.toLowerCase().includes(filterText) ||
                        new Date(question.publish_date).toLocaleDateString().toLowerCase().includes(filterText) ||
                        new Date(question.deadline).toLocaleDateString().toLowerCase().includes(filterText)
                    );

                    if (sortValue === 'date') {
                        filteredQuestions.sort((a, b) => new Date(a.publish_date) - new Date(b.publish_date));
                    } else if (sortValue === 'deadline') {
                        filteredQuestions.sort((a, b) => new Date(a.deadline) - new Date(b.deadline));
                    }

                    // Paginate questions
                    const startIdx = (currentPage - 1) * questionsPerPage;
                    const paginatedQuestions = filteredQuestions.slice(startIdx, startIdx + questionsPerPage);

                    const questionsList = document.getElementById('questions-list');
                    questionsList.innerHTML = '';
                    paginatedQuestions.forEach(question => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td class="2">${question.title}</td>
                            <td class="2">${new Date(question.publish_date).toLocaleDateString()}</td>
                            <td class="2">${new Date(question.deadline).toLocaleDateString()}</td>
                        `;
                        questionsList.appendChild(row);
                    });

                    // Update pagination info
                    pageInfo.textContent = `صفحه ${currentPage} از ${Math.ceil(filteredQuestions.length / questionsPerPage)}`;

                    // Disable/enable pagination buttons
                    prevPageBtn.disabled = currentPage === 1;
                    nextPageBtn.disabled = currentPage === Math.ceil(filteredQuestions.length / questionsPerPage);
                }
            })
            .catch(error => console.error('Error fetching questions:', error));
    </script>
    <script src="/assets/js/main.js"></script>
</body>


</html>